import{r as e,h as s,g as i}from"./p-b3be7481.js";const t=class{constructor(s){e(this,s)}componentDidLoad(){setTimeout(()=>{this.addIntersectionObserver()},300)}componentWillUpdate(){this.src!==this.oldSrc&&this.addIntersectionObserver(),this.oldSrc=this.src}handleImage(){const e=this.el.shadowRoot.querySelector(".progressive-img"),s=this.el.shadowRoot.querySelector("img"),i=new Image,t=()=>{s&&(s.alt&&(i.alt=s.alt),e.removeChild(s)),i.classList.remove("reveal")};i.onload=()=>{window.requestAnimationFrame?requestAnimationFrame(()=>{e.insertBefore(i,s&&s.nextSibling).addEventListener("animationend",t)}):(e.insertBefore(i,s&&s.nextSibling),setTimeout(()=>{t()},1e3)),s.removeAttribute("data-src")},i.className="reveal",i.src=s.getAttribute("data-src")}addIntersectionObserver(){this.src&&("IntersectionObserver"in window?(this.io=new IntersectionObserver(e=>{e[0].isIntersecting&&(this.handleImage(),this.removeIntersectionObserver())}),this.io.observe(this.el.shadowRoot.querySelector("img"))):setTimeout(()=>{this.handleImage()},300))}removeIntersectionObserver(){this.io&&(this.io.disconnect(),this.io=null)}render(){return s("span",{class:"progressive-img"},s("img",{class:"preview",src:this.src,"data-src":this.largeSrc||this.src,alt:this.alt}))}get el(){return i(this)}};t.style="ny-image{display:block;width:100%}.progressive-img{position:relative;display:block;overflow:hidden;outline:none}.progressive-img img{display:block;width:100%;max-width:none;height:auto;border:0 none}.progressive-img img.preview{-webkit-filter:blur(2vw);filter:blur(2vw);-webkit-transform:scale(1.05);transform:scale(1.05)}.progressive-img img.reveal{position:absolute;left:0;top:0;will-change:transform, opacity;-webkit-animation:progressiveReveal 1s ease-out;animation:progressiveReveal 1s ease-out}@-webkit-keyframes progressiveReveal{0%{-webkit-transform:scale(1.05);transform:scale(1.05);opacity:0}100%{-webkit-transform:scale(1);transform:scale(1);opacity:1}}@keyframes progressiveReveal{0%{-webkit-transform:scale(1.05);transform:scale(1.05);opacity:0}100%{-webkit-transform:scale(1);transform:scale(1);opacity:1}}";export{t as ny_image}