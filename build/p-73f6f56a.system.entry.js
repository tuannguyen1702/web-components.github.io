System.register(["./p-0a124fa9.system.js"],(function(e){"use strict";var t,r,i;return{setters:[function(e){t=e.r;r=e.h;i=e.g}],execute:function(){var s="ny-image{display:block;width:100%}.progressive-img{position:relative;display:block;overflow:hidden;outline:none}.progressive-img img{display:block;width:100%;max-width:none;height:auto;border:0 none}.progressive-img img.preview{-webkit-filter:blur(2vw);filter:blur(2vw);-webkit-transform:scale(1.05);transform:scale(1.05)}.progressive-img img.reveal{position:absolute;left:0;top:0;will-change:transform, opacity;-webkit-animation:progressiveReveal 1s ease-out;animation:progressiveReveal 1s ease-out}@-webkit-keyframes progressiveReveal{0%{-webkit-transform:scale(1.05);transform:scale(1.05);opacity:0}100%{-webkit-transform:scale(1);transform:scale(1);opacity:1}}@keyframes progressiveReveal{0%{-webkit-transform:scale(1.05);transform:scale(1.05);opacity:0}100%{-webkit-transform:scale(1);transform:scale(1);opacity:1}}";var o=e("ny_image",function(){function e(e){t(this,e)}e.prototype.componentDidLoad=function(){var e=this;setTimeout((function(){e.addIntersectionObserver()}),300)};e.prototype.componentWillUpdate=function(){if(this.src!==this.oldSrc){this.addIntersectionObserver()}this.oldSrc=this.src};e.prototype.handleImage=function(){var e=this.el.shadowRoot.querySelector(".progressive-img");var t=this.el.shadowRoot.querySelector("img");var r=new Image;var i=function(){if(t){if(t.alt)r.alt=t.alt;e.removeChild(t)}r.classList.remove("reveal")};r.onload=function(){if(window.requestAnimationFrame){requestAnimationFrame((function(){e.insertBefore(r,t&&t.nextSibling).addEventListener("animationend",i)}))}else{e.insertBefore(r,t&&t.nextSibling);setTimeout((function(){i()}),1e3)}t.removeAttribute("data-src")};r.className="reveal";r.src=t.getAttribute("data-src")};e.prototype.addIntersectionObserver=function(){var e=this;if(!this.src){return}if("IntersectionObserver"in window){this.io=new IntersectionObserver((function(t){if(t[0].isIntersecting){e.handleImage();e.removeIntersectionObserver()}}));this.io.observe(this.el.shadowRoot.querySelector("img"))}else{setTimeout((function(){e.handleImage()}),300)}};e.prototype.removeIntersectionObserver=function(){if(this.io){this.io.disconnect();this.io=null}};e.prototype.render=function(){return r("span",{class:"progressive-img"},r("img",{class:"preview",src:this.src,"data-src":this.largeSrc||this.src,alt:this.alt}))};Object.defineProperty(e.prototype,"el",{get:function(){return i(this)},enumerable:true,configurable:true});return e}());o.style=s}}}));